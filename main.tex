\documentclass[9pt,toc=listof,paper=portrait,paper=24cm:17cm,mpinclude=true,captions=outerbeside,usegeometry=true,\jobname]{scrbook}
\usepackage{geometry} %[showframe]

\areaset{10cm}{18.8cm}
\setlength{\columnsep}{\marginparsep}   % the columnsep is used by KOMA captionbeside to separate the caption from the image

\savegeometry{defaultpage}

%\usepackage[english]{babel}
\usepackage[utf8]{inputenc}

\usepackage{polyglossia}
\usepackage{csquotes}
\setmainlanguage{english}

\usepackage[table]{xcolor}
\usepackage{ragged2e}                           % RaggedLeft and RaggedRight commands (left align, right align)
\usepackage[hang]{footmisc}                     % hanging footnote, possible ragged but this introduces new breaks and consequently new pages
\usepackage{url}
\usepackage{hyperref}                           % references in PDF
\usepackage{fnpct}                              % footnotes and punctuation make 1. -> .1
\usepackage{graphicx}                           % Include images
\usepackage{caption}
\usepackage{subcaption}                         % for subfigure
\usepackage{newfloat}                           % for \DeclareFloatingEnvironment
\usepackage[section]{placeins}                  % https://tex.stackexchange.com/questions/279/how-do-i-ensure-that-figures-appear-in-the-section-theyre-associated-with
\usepackage[natbib=true,backend=biber,style=alphabetic-verb]{biblatex}
\usepackage{mparhack}                           % For the right placement of marginpars. https://www.texfaq.org/FAQ-marginparside
\usepackage{xparse}                             % for environments
\usepackage[strict]{changepage}                 % for wider then the typearea
\usepackage{shorttoc}
\usepackage{calc}                               % for geometry calculations



\usepackage{listings}
\usepackage{booktabs,subcaption,amsfonts,dcolumn}
\newcolumntype{d}[1]{D..{#1}}
\newcommand\mc[1]{\multicolumn{1}{c}{#1}}
%\usepackage{booktabs}
\setlength{\heavyrulewidth}{1.5pt}
\setlength{\abovetopsep}{4pt}
\usepackage{ amssymb }
%%%%%%%%%%%%%%%
\usepackage{comment}
%\pgfplotsset{width=10cm,compat=1.9}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{pgf-pie}
\usepackage{amsmath}
\usepackage{booktabs}
\usepackage{cleveref}                           % provides \cref command
\usepackage{todonotes}
\usepackage{lststyles}
\usepackage{paralist}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning,fit,backgrounds}
\newcommand{\hsp}{\vphantom{Ag}}
\usepackage{xspace}
\usepackage{multirow}

\usepackage{import} % For /subimport{./}{sibling-file.tex}

\setuptodonotes{inline}


% <lsq2-commands>
\newcommand{\dbpedia}{\textsc{DBpedia}\xspace}
\newcommand{\linkedgeodata}{\textsc{LinkedGeoData}\xspace}
\newcommand{\swdf}{\textsc{SWDF}\xspace}
\newcommand{\wikidata}{\textsc{Wikidata}\xspace}

\newcommand{\biotrdf}{\textsc{Bio2RDF}\xspace}
\newcommand{\affymetrix}{\textsc{Affymetrix}\xspace}
\newcommand{\biomodels}{\textsc{BioModels}\xspace} % aka biomedels
\newcommand{\ctd}{\textsc{CTD}\xspace}
\newcommand{\dbsnp}{\textsc{dbSNP}\xspace}
\newcommand{\drugbank}{\textsc{DrugBank}\xspace}
\newcommand{\genage}{\textsc{GenAge}\xspace}
\newcommand{\gendr}{\textsc{GenDR}\xspace}
\newcommand{\go}{\textsc{GO}\xspace} % aka gene
\newcommand{\goa}{\textsc{GOA}\xspace}
\newcommand{\hgnc}{\textsc{HGNC}\xspace}
\newcommand{\irefindex}{\textsc{iRefIndex}\xspace}
\newcommand{\kegg}{\textsc{KEGG}\xspace}
\newcommand{\linkedspl}{\textsc{LinkedSQP}\xspace}
\newcommand{\mgi}{\textsc{MGI}\xspace}
\newcommand{\ncbigene}{\textsc{NCBIGene}\xspace}
\newcommand{\omim}{\textsc{OMIM}\xspace}
\newcommand{\pharmgkb}{\textsc{PharmGKB}\xspace}
\newcommand{\sabiork}{\textsc{SABIORK}\xspace}
\newcommand{\sgd}{\textsc{SGD}\xspace}
\newcommand{\sider}{\textsc{SIDER}\xspace}
\newcommand{\taxonomy}{\textsc{Taxonomy}\xspace}
\newcommand{\wormbase}{\textsc{Wormbase}\xspace}
% </lsq2-commands>

% <sparklify>
\usepackage[ruled,vlined, linesnumbered]{algorithm2e}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{fancybox}
\usepackage{colortbl}

\newcommand{\fixme}[2][Fixme]{\textcolor{red}{\textbf{[#1:}} {\color{blue} {#2}}\textcolor{red}{\textbf{]}}}
\newcommand{\furl}[1]{\footnote{\scriptsize \url{#1}}}

\newcounter{metric}
\newcommand{\emphb}[1]{\textbf{\textit{#1}}}
\newcommand{\defn}[1]{\emphb{#1}\quad}
\newcommand\newitem[1][]{\item[#1)]\refstepcounter{metric}\def\@currentlabel{#1}}

\definecolor{cycle3}{RGB}{77, 175, 74}
\newcommand{\win}{\cellcolor{cycle3!30}}

% </sparklify>


% <maven-based-data-mgmt>
\usepackage{microtype}
\usepackage[newfloat]{minted}

%\newcommand{\textls}[1]{#1}% Note additional group!
\renewcommand{\textls}[1]{#1}
% "normal" (i.e. non-raised) tilde (~) symbols in minted enviroment
\setminted[]{fontfamily=lmtt}

% </maven-based-data-mgmt>


% <linkedgeodata>
%\usepackage[T1]{fontenc}
\usepackage{array}
\usepackage{threeparttable}
\usepackage{tabulary} %can use align in tables with line breaks
\usepackage{sepnum}
\usepackage{longtable}
\usepackage{algpseudocode}
%\usepackage{underscore}
%\usepackage[english]{babel} % use german Umlaute in examples

%\DeclareCaptionType{algorithmic}

\newcommand{\val}[1]{\sepnum{.}{\,}{}{#1}}
\newcommand{\valunit}[2]{\val{#1}\,#2}
\newcommand{\valrange}[2]{\val{#1} -- \val{#2}}
\newcommand{\valunitrange}[3]{\val{#1} -- \valunit{#2}{#3}}

%\newcommand{\todo}[1]{\textbf{[ToDo: #1]}}
\newcommand{\torev}[1]{\textbf{[Review: #1]}}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

%\newcommand{\algorithmicrequire}{\textbf{Input:}}
%\newcommand{\algorithmicensure}{\textbf{Output:}}

% </linkedgeodata>


% <simplified-r2rml>
\lstdefinestyle{rdf}{numberblanklines=true, morekeywords={}}
\lstdefinestyle{sparql}{numberblanklines=true, morekeywords={SELECT, WHERE, FILTER, GROUP, BY, IN, AS, SERVICE, GRAPH}}
\newcommand{\urlfn}[1]{\footnote{\scriptsize\url{#1}}}
% <simplified-r2rml>

\setlength{\footnotemargin}{\parindent}

% draw frame around the complete page
%\usepackage{eso-pic}
%\AddToShipoutPictureBG{\begin{tikzpicture}[overlay,remember picture]
% \draw (current page.south west) rectangle (current page.north east);
%\end{tikzpicture}}

%% Configure Bibliography
\addbibresource{references.bib}
\DeclareRefcontext{web}{labelprefix=Web:}

\setsansfont{Open Sans}[
UprightFont = {* Condensed Light},
ItalicFont = {* Condensed Light Italic},
BoldFont = {* Condensed Bold},
]

\setkomafont{pageheadfoot}{\large\sffamily}
\setkomafont{pagenumber}{\large\sffamily}

% For more caption customization
% https://tex.stackexchange.com/a/318175/11820

\captionsetup[listing]{name={Listing}}

\captionsetup{format=plain, labelfont={bf}, font=footnotesize}
% , singlelinecheck=off

% \begin{disfigure}[short title]{long title}{label}
%   content
% \end{disfigure}
% Stared for wide figures
\NewDocumentEnvironment{disenv}{ o m m }
{
  \checkoddpage
  \ifoddpage
    %odd
    \captionsetup{justification=RaggedRight}
  \else
    %even
    \captionsetup{justification=RaggedLeft}
  \fi
  \begin{captionbeside}%
  [\IfValueTF{#1}{#1}{#2}]% short title
  {#2\label{#3}}
  [o]% caption on the outer document side
  [\dimexpr\textwidth+\marginparwidth+\marginparsep\relax]% enlarge the used width
  [0pt]*% align with the inner margin
  \begin{minipage}[b]{\textwidth}
}
{
  \end{minipage}
  \end{captionbeside}
}
\NewDocumentEnvironment{disenv*}{ o m m }
{
  \begin{adjustwidth*}{}{\dimexpr-\marginparwidth+\marginparsep\relax}
%  \begin{minipage}[b]{\dimexpr\textwidth+\marginparwidth+\marginparsep\relax}
}
{
  \end{adjustwidth*}
  \caption[\IfValueTF{#1}{#1}{#2}]{#2}
  \label{#3}
}

\NewDocumentEnvironment{disfigure}{ o m m }
{
  \begin{figure}[htbp]
    \begin{disenv}[#1]{#2}{#3}
}
{
    \end{disenv}
  \end{figure}
}
\NewDocumentEnvironment{disfigure*}{ o m m }
{
  \begin{figure}[htbp]
    \begin{disenv*}[#1]{#2}{#3}
}
{
    \end{disenv*}
  \end{figure}
}

\NewDocumentEnvironment{dislisting}{ o m m }
{
  \begin{listing}[htbp]
    \begin{disenv}[#1]{#2}{#3}
}
{
    \end{disenv}
  \end{listing}
}
\NewDocumentEnvironment{dislisting*}{ o m m }
{
  \begin{listing}[htbp]
    \begin{disenv*}[#1]{#2}{#3}
}
{
    \end{disenv*}
  \end{listing}
}

\NewDocumentEnvironment{distable}{ o m m }
{
  \begin{table}[htbp]
    \begin{disenv}[#1]{#2}{#3}
}
{
    \end{disenv}
  \end{table}
}
\NewDocumentEnvironment{distable*}{ o m m }
{
  \begin{table}[htbp]
    \begin{disenv*}[#1]{#2}{#3}
}
{
    \end{disenv*}
  \end{table}
}

\newcommand{\chapcite}[1]{%
  \citeauthor{#1}: \citetitle{#1} \cite{#1}%
}
\newcommand{\chapterref}[1]{%
  \marginpar{%
    \checkoddpage%
    \ifoddpage%
      %odd
      \RaggedRight%
    \else%
      %even
      \RaggedLeft%
    \fi%
    \footnotesize%
    \vspace{.44\baselineskip}
    \textcolor{black!80}{The results presented in this chapter were first published in #1}\par%
  }
}
\newcommand{\partsecref}[1]{%
  \marginpar{%
    \checkoddpage%
    \ifoddpage%
      %odd
      \RaggedRight%
    \else%
      %even
      \RaggedLeft%
    \fi%
    \footnotesize%
    \vspace{.44\baselineskip}
    \textcolor{black!80}{Parts of this section were first published in #1}\par%
  }
}


% Just a helper method for length
% FROM https://tex.stackexchange.com/a/239496/11820
\makeatletter
\def\convertto#1#2{\strip@pt\dimexpr #2*65536/\number\dimexpr 1#1}
\makeatother

% avoid footnote break
% https://tex.stackexchange.com/questions/68229/unwanted-pagebreak-in-footnote
\interfootnotelinepenalty=10000
% Avoid overfull hboxes
\emergencystretch=1em

% Highlight overfull hboxes
%\overfullrule=1mm

% Avoid Hurenkinder and so on
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000

\usepackage{afterpage}
\newcommand\blankpage{%
\null
\thispagestyle{empty}%
%\addtocounter{page}{-1}%
\newpage}

%%% START OF CONTENT

\title{Knowledge Graphs over Large Data Sources: Construction, Exploration and Analytics}

\author{Claus Stadler}
\date{2024-06-07 TODO}


\makeatletter
\newcommand{\myTitle}{\@title}
\newcommand{\mySubtitle}{Some Subtitle}
\newcommand{\myDocumentType}{Dissertation}
\newcommand{\myName}{\@author}
\newcommand{\myReihe}{Publikationen in der Informatik | Band X}
\makeatother

\hypersetup{
  pdfauthor=\myName,
  pdftitle=\myTitle,
}

%\recalctypearea
\begin{document}

\pagestyle{empty}
\input{book-parts/frontfrontmatter}

\pagestyle{headings}

\newgeometry{%
textwidth=\textwidth+\marginparwidth-\marginparsep,
textheight=\textheight,
top=1in+\voffset+\topmargin+\headheight+\headsep,
inner=1in+\hoffset+\oddsidemargin,
marginparsep=\marginparsep,
marginparwidth=\marginparsep,
}
\savegeometry{widepage}
\input{book-parts/preface}
\clearpage

\pagestyle{empty}
\restoregeometry
\input{book-parts/frontmatter}

% NOTE tableofcontents is configured in ./book-parts/frontmatter.tex
%\tableofcontents

%\include{sections/Introduction}
%\include{sections/Methodology}

%\import{chapters/introduction.tex}
\import{chapters/01-construction/}{construction}
\import{chapters/02-exploration/}{exploration}
\import{chapters/03-analytics/}{analytics}
\import{chapters/}{conclusions.tex}

% Management
%\include{sections/maven-based-datamanagement}

\end{document}
